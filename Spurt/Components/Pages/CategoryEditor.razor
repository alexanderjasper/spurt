@using Spurt.Domain.Categories
@using Spurt.Domain.Categories.Commands

<div>
    <h3>@(IsEditing ? "Rediger kategori" : "Opret kategori")</h3>
    
    <div>
        <label for="categoryTitle">Kategorinavn</label>
        <input id="categoryTitle" @bind="Category.Title" />
    </div>
    
    <h4>Spørgsmål</h4>
    <p>Opret 5 spørgsmål med pointværdier fra 100 til 500.</p>

    @foreach (var pointValue in new[] { 100, 200, 300, 400, 500 })
    {
        var index = PointValueToIndex(pointValue);
        EnsureClueExists(pointValue);
        
        <div>
            <h5>@pointValue point</h5>
            <div>
                <div>
                    <label>Svar (vises til spillerne)</label>
                    <input @bind="@Category.Clues[index].Answer" @bind:event="oninput" />
                </div>
                <div>
                    <label>Spørgsmål (hvad spillerne skal svare)</label>
                    <input @bind="@Category.Clues[index].Question" @bind:event="oninput" />
                </div>
            </div>
        </div>
    }
    
    <div>
        <button @onclick="SaveDraft">Gem kladde</button>
        <button @onclick="SubmitCategory" 
                disabled="@(!IsValid)">Indsend kategori</button>
    </div>
    
    @if (ErrorMessage != null)
    {
        <div>
            <p>@ErrorMessage</p>
        </div>
    }
</div>